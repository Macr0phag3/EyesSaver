# EyesSaver
## å®ƒçš„ç‰¹ç‚¹æœ‰å“ªäº›ï¼Ÿ
1. ä½ å¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªç•ªèŒ„é’Ÿ
2. æ— ç•Œé¢ï¼Œåªåˆ©ç”¨é€šçŸ¥æ¥æé†’ã€‚æé†’ä¼‘æ¯çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰ç†å®ƒï¼Œå®ƒä¼šè‡ªåŠ¨å»¶è¿Ÿä¼‘æ¯ã€‚ä½ ä¹Ÿå¯ä»¥æŒ‡å®šå»¶è¿Ÿä¸€æ®µæ—¶é—´
3. **è‡ªå¯åŠ¨**
4. å‡ºç°æ¯å±äº‹ä»¶çš„æ—¶å€™è§†ä¸ºä¼‘æ¯ã€‚æ¯å±äº‹ä»¶åŒ…æ‹¬ï¼šé”å±ã€ç¡çœ ç­‰ç­‰ã€‚ç»“æŸæ¯å±äº‹ä»¶çš„æ—¶å€™ä¼šæé†’æ˜¯å¦è¦æå‰ç»“æŸä¼‘æ¯ã€‚
5. **ç›®å‰åªæ”¯æŒ MacOS**

## ä¸ºä»€ä¹ˆè¦åšå®ƒï¼Ÿ
å¸‚é¢ä¸Šçš„ç•ªèŒ„é’Ÿéƒ½æ²¡æœ‰è‡ªå¯åŠ¨çš„åŠŸèƒ½ï¼Œå¯¹äºç»å¸¸ç”¨ç”µè„‘çš„æˆ‘æ¥è¯´ï¼Œå¸¸å¸¸çœ‹åˆ°çœ¼ç›é…¸æ¶©æ‰æƒ³èµ·è¦ä¼‘æ¯äº†ã€‚è€Œ EyesSaver åœ¨äº®å±çš„æ—¶å€™è‡ªåŠ¨è¿›å…¥å·¥ä½œè®¡æ—¶ï¼Œå°±ä¸æ€•å¿˜è®°å¯åŠ¨ç•ªèŒ„é’Ÿäº†ã€‚å¹¶ä¸”æ¯å±äº‹ä»¶è¶…è¿‡ 5 åˆ†é’Ÿè§†ä¸ºä¼‘æ¯ï¼Œè§£é”å”¤é†’åé‡æ–°å¼€å§‹å·¥ä½œè®¡æ—¶ã€‚

## å¦‚ä½•ä½¿ç”¨å®ƒï¼Ÿ
### è‡ªåŠ¨é…ç½®
1. å®‰è£… alerterï¼šhttps://github.com/vjeantet/alerter
2. å®‰è£… hammerspoonï¼šhttp://www.hammerspoon.org/ ï¼Œå¹¶ç¡®ä¿é…ç½®å¦‚ä¸‹ï¼š
![](https://github.com/Macr0phag3/EyesSaver/blob/master/pics/hammer.png)
3. æ‰§è¡Œ `chmod +x install.sh`ï¼Œç„¶åè¿è¡Œ `./install.sh`
4. æ ¹æ®æç¤ºè¿›è¡Œé…ç½®ï¼š
```
Â» ./install.sh
> è¾“å…¥ EyesSaver çš„æ–‡ä»¶è·¯å¾„ï¼š
(å¦‚ï¼š/home/macr0phag3/EyesSaver/ é‚£ä¹ˆä½ éœ€è¦è¾“å…¥ /home/macr0phag3/EyesSaver/)
> /Users/macr0phag3/Tr0y/.scripts/EyesSaver
ç¡®å®šè·¯å¾„æ˜¯ /Users/macr0phag3/Tr0y/.scripts/EyesSaver ? [y]/n
> y
> æ‰§è¡Œ crontab -e, å¹¶å°†ä»¥ä¸‹å‘½ä»¤æ’å…¥
*/1 * * * * bash /Users/macr0phag3/Tr0y/.scripts/EyesSaver/alert.sh >> /Users/macr0phag3/Tr0y/.scripts/EyesSaver/log 2>&1
> å®Œæˆ? [y]/n
> y
> é…ç½® crontab: å®Œæˆ

> æ›¿æ¢å®Œæˆè·¯å¾„: å®Œæˆ

> åˆå§‹åŒ–å·¥ä½œæ—¶é—´: å®Œæˆ

> åˆå§‹åŒ– HammerSpoon è„šæœ¬: å®Œæˆ

> è®°å¾—å¯åŠ¨ä¸€ä¸‹ hammerspoon
```

5. å¯åŠ¨ hammerspoon

### æ‰‹åŠ¨é…ç½®
1. å®‰è£… alerterï¼šhttps://github.com/vjeantet/alerter
2. å®‰è£… hammerspoonï¼šhttp://www.hammerspoon.org/ ï¼Œå¹¶ç¡®ä¿é…ç½®å¦‚ä¸‹ï¼š
![](https://github.com/Macr0phag3/EyesSaver/blob/master/pics/hammer.png)

3. ç”±äºæ¯ä¸ªäººæ”¾ç½® EyesSaver çš„ä½ç½®ä¸åŒï¼Œä½ éœ€è¦ä¿®æ”¹ä»¥ä¸‹è„šæœ¬ä¸­çš„ `saverpath`ï¼š
    - alert.sh
    - init.lua
    - start.sh
    - stop.sh
4. åˆå§‹åŒ–é…ç½®ï¼š`date +%s > saverpath/eyessaver/resttimer`ã€‚æ³¨æ„ä¿®æ”¹è¿™é‡Œçš„ `saverpath`
5. å°† `alert.sh` åŠ å…¥ crontabï¼š
```
*/1 * * * * bash saverpath/eyessaver/alert.sh >> saverpath/eyessaver/log 2>&1
```
åŒæ ·ï¼Œéœ€è¦æ³¨æ„ä¿®æ”¹è¿™é‡Œçš„ `saverpath`

6. å°† `init.lua` é“¾æ¥åˆ° hammerspoon æŒ‡å®šçš„ç›®å½•ï¼š`ln init.lua ~/.hammerspoon/`
7. å¯åŠ¨ hammerspoon
8. å®‰å¿ƒå·¥ä½œå»å§ ğŸ•¶~

## å®ƒé•¿å•¥æ ·ï¼Ÿ
æ—¥å¿—ï¼š
```
2019-04-02 21:40:21 æ£€æµ‹åˆ°é”å±äº‹ä»¶ï¼Œæš‚åœå·¥ä½œè®¡æ—¶å™¨ï¼Œå¼€å§‹ä¼‘æ¯è®¡æ—¶å™¨
2019-04-02 21:40:23 æ£€æµ‹åˆ°è§£é”äº‹ä»¶ï¼Œä¼‘æ¯æ—¶é•¿ 2 ç§’ï¼Œè§†ä¸ºä¸´æ—¶æ‰“æ–­å·¥ä½œï¼Œä¸é‡ç½®å·¥ä½œè®¡æ—¶å™¨
2019-04-02 21:47:31 æ£€æµ‹åˆ°é”å±äº‹ä»¶ï¼Œæš‚åœå·¥ä½œè®¡æ—¶å™¨ï¼Œå¼€å§‹ä¼‘æ¯è®¡æ—¶å™¨
2019-04-02 22:12:59 æ£€æµ‹åˆ°è§£é”äº‹ä»¶ï¼Œä¼‘æ¯æ—¶é•¿ 25.0 åˆ†é’Ÿï¼Œä¼‘æ¯ç»“æŸï¼Œå¼€å§‹å·¥ä½œï¼Œé‡ç½®å·¥ä½œè®¡æ—¶å™¨
```


é€šçŸ¥ï¼š

![](https://github.com/Macr0phag3/EyesSaver/blob/master/pics/rest.png)

![](https://github.com/Macr0phag3/EyesSaver/blob/master/pics/postpone.png)

![](https://github.com/Macr0phag3/EyesSaver/blob/master/pics/cancel.png)


## è‡ªå®šä¹‰
`alert.sh` ä¸­çš„ `è‡ªå®šä¹‰` æˆ–è®¸æ˜¯ä½ æƒ³è¦çš„


## ä¸ä¸€å®šä¼š DO çš„ TODO
- [ ] install è„šæœ¬ï¼Œç›´æ¥é…ç½®è·¯å¾„













